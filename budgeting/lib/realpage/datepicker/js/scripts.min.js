angular.module("rpDatepicker",[]),function(a){"use strict";function b(a){a.put(d,c)}var c,d;d="templates/realpage/common/datepicker/datepicker.html",c="<div class='rp-datepicker' ng-style='model.styles'><span class='close' ng-click='model.hide()'>x</span><div class='header'><span class='prev' rp-stop-event='click' ng-click='model.prevMonth()' ng-class='{disabled: !model.allowPrevMonth()}'></span><span class='next' rp-stop-event='click' ng-click='model.nextMonth()' ng-class='{disabled: !model.allowNextMonth()}'></span><p class='month-name'>{{model.monthName()}}</p></div><div class='days-header'><p class='day-name'>S</p><p class='day-name'>M</p><p class='day-name'>T</p><p class='day-name'>W</p><p class='day-name'>T</p><p class='day-name'>F</p><p class='day-name'>S</p></div><div class='days'><div ng-repeat='day in model.days' class='day' ng-class='day.state' ng-click='model.select(day)'>{{day.text}}</div></div><div class='footer'><span class='prev-year' rp-stop-event='click' ng-click='model.prevYear()' ng-class='{disabled: !model.allowPrevYear()}'>{{model.year()-1}}</span><span class='next-year' rp-stop-event='click' ng-click='model.nextYear()' ng-class='{disabled: !model.allowNextYear()}'>{{model.year()+1}}</span><span class='current-year'>{{model.year()}}</span></div></div>",a.module("rpDatepicker").run(["$templateCache",b])}(angular),function(a){"use strict";function b(b,c,d){var e,f;return e={days:[],size:{},styles:{},events:d(),_data:{min:"",max:"",refDate:"",selDate:"",callerID:"",newCaller:!0}},f=e._data,e.update=function(a){return e.updateData(a).build()},e.updateData=function(b){return f.newCaller=f.callerID!=b.callerID,f.newCaller&&e.events.publish({name:"update"}),a.extend(f,b),e},e.build=function(){var a=f.refDate,b=c(a).endDay(),d=c(a).startDay();for(e.days.flush();!c(d).is(b);){var g=f.max&&c(d).isAfter(f.max),h=f.min&&c(d).isBefore(f.min),i=f.selDate&&c(d).is(f.selDate),j=h||g;e.days.push({moment:d.clone(),text:d.format("D"),state:{active:i,disabled:j,today:c(d).isToday(),current:c(d).isCurrentMonth(a)}}),d.add(1,"day")}return e},e.updateStyles=function(b){return a.extend(e.styles,b),e},e.updateSize=function(b){return a.extend(e.size,b),e},e.hide=function(){return e.styles.display="none",e.events.publish({name:"hide"}),e},e.show=function(){return e.styles.display="block",e.events.publish({name:"show"}),e},e.isHidden=function(){return"block"!=e.styles.display},e.prevMonth=function(){return f.refDate.add(-1,"month"),e.build()},e.prevYear=function(){return f.refDate.add(-1,"year"),e.build()},e.nextMonth=function(){return f.refDate.add(1,"month"),e.build()},e.nextYear=function(){return f.refDate.add(1,"year"),e.build()},e.allowPrevMonth=function(){if(!f.min||!f.refDate)return!0;var a=f.refDate.clone().add(-1,"month");return!c(a).isBefore(f.min)},e.allowPrevYear=function(){if(!f.min||!f.refDate)return!0;var a=f.refDate.clone().add(-1,"year");return!c(a).isBefore(f.min)},e.allowNextMonth=function(){if(!f.max||!f.refDate)return!0;var a=f.refDate.clone().add(1,"month");return!c(a).isAfter(f.max)},e.allowNextYear=function(){if(!f.max||!f.refDate)return!0;var a=f.refDate.clone().add(1,"year");return!c(a).isAfter(f.max)},e.monthName=function(){return f.refDate?f.refDate.format("MMMM"):""},e.year=function(){return f.refDate?parseInt(f.refDate.format("YYYY")):0},e.select=function(a){a.state.disabled||(f.selDate=a.moment.clone(),e.days.forEach(function(b){b.state.active=c(b.moment).is(a.moment)}),e.events.publish({name:"select",data:a.moment.format("x")}))},e.prevCaller=function(){return f.callerID},e}a.module("rpDatepicker").factory("rpDatepickerModel",["moment","rpDate","eventStream",b])}(angular),function(a){"use strict";function b(b){function c(c,d,e){var f,g={};g.init=function(){c.model=b,f=a.element("body"),b.events.subscribe(g.updateBinding),g.updateSize()},g.updateBinding=function(a){return"hide"==a.name?f.off("click.datepicker"):"updateSize"==a.name?g.updateSize():f.on("click.datepicker",g.hide),g},g.hide=function(){c.$apply(function(){b.hide()})},g.updateSize=function(){return b.updateSize({width:d.outerWidth(),height:d.outerHeight()}),g},g.init()}return{scope:{},link:c,restrict:"E",replace:!0,templateUrl:"templates/realpage/common/datepicker/datepicker.html"}}a.module("rpDatepicker").directive("rpDatepicker",["rpDatepickerModel",b])}(angular);