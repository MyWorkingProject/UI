angular.module("rpUser",[]),function(a){"use strict";function b(b,c){var d,e,f,g={};return f={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},e={username:"",password:"",sessionGuid:"abc",client_id:"OS_web",grant_type:"password"},d={data:e,method:"POST",headers:f,transformRequest:c,url:"/api/core/authentication/login"},g.validate=function(c){return d.data=a.extend(e,{username:c.username,password:c.password}),b(d)},g}a.module("rpUser").factory("authentication",["$http","serialize",b])}(angular),function(a){"use strict";function b(b){var c={},d={timeout:27e5};return c.isReady=!1,c.events={update:b()},c.get=function(){return d},c.update=function(b){c.isReady=!0,a.extend(d,b),c.events.update.publish(d)},c.destroy=function(){},c.extend=function(){},c.publish=function(a){d=a,c.isReady=!0,c.events.update.set(a)},window.sessionUpdate=c.update,c}a.module("rpUser").factory("session",["eventStream",b])}(angular),function(a){"use strict";function b(a,b,c){var d,e,f={};return d={username:"",password:""},e={isAuthenticated:!1},f.user=d,f.authenticate=function(){return e.deferred=a.defer(),c.validate(d).then(f.updateSession,f.destroySession),e.deferred.promise},f.updateSession=function(a){f.createAuth(a.data),e.isAuthenticated=!0,e.deferred.resolve(a.data)},f.createAuth=function(a){var c=a.access_token,d=a.expires_in/1440;b.create("authorization",c,d)},f.destroySession=function(){e.isAuthenticated=!1,e.deferred.reject()},f.isAuthenticated=function(){return e.isAuthenticated},f}a.module("rpUser").factory("userModel",["$q","rpCookie","authentication",b])}(angular);