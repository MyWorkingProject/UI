angular.module("rpPageOptions",[]),function(a){"use strict";function b(a){a.put(d,c)}var c,d;d="templates/realpage/add-to-favorites.html",c="<div class='add-to-favorites rp-inline-workflow not-ready' rp-slide-toggle='model.slideToggle'><div class='workflow-inner-wrap'><a href='' class='workflow-close' ng-click='fav.closeForm()'></a><h2 class='workflow-title'>{{model.text.title}}</h2><div class='select-group'><p class='menu-label'>{{model.text.group}}</p><select name='favGroup' class='rp-form-select' ng-model='model.groupId' rp-update-display-text='true' rp-select-options='model.groupOptions' ng-options='option.value as option.name for option in model.groupOptions.options'></select> </div><p class='workflow-actions'><a href='' class='button add' ng-click='fav.add()'>{{model.text.add}}</a><a href='' class='button white cancel' ng-click='fav.closeForm()'>{{model.text.cancel}}</a></p></div></div>",a.module("rpPageOptions").run(["$templateCache",b])}(angular),function(a){"use strict";function b(a){var b,c,d,e={};return c={open:!1},d={state:c,name:"favForm"},b={title:"Add To Favorites",group:"Group",add:"Add",cancel:"Cancel"},e.init=function(){return e.text=b,e.slideToggle=d,e.groupOptions=a,e.groupId=a.getSelectedValue(),a.onReady(e.onReady),e},e.onReady=function(){e.groupId=a.getSelectedValue()},e.open=function(){c.open=!0},e.close=function(){c.open=!1},e.init()}a.module("rpPageOptions").factory("addToFavoritesModel",["favGroupOptions",b])}(angular),function(a){"use strict";function b(a,b,c,d,e,f){var g=this;g.init=function(){a.model=c,a.$on("$destroy",g.closeForm)},g.add=function(){var a,f=e.pageInfo();a={groupId:c.groupId,link:{sequence:0,favoriteID:0,dirtyBit:!0,guid:f.guid,legacyFunctionName:"",url:b.absUrl(),tempGroupID:c.groupId,title:f.activityName,favoriteGroupID:c.groupId,displayName:f.activityName,activityUIID:f.activityUIID}},d.addFav(a).save().then(d.reLoad),g.closeForm()},g.closeForm=function(){c.close()},g.init()}a.module("rpPageOptions").controller("AddToFavoritesCtrl",["$scope","location","addToFavoritesModel","favoritesModel","authorization","favorites",b])}(angular),function(a){"use strict";function b(){function a(a,b,c){}return{scope:{},link:a,restrict:"E",replace:!0,controller:"AddToFavoritesCtrl as fav",templateUrl:"templates/realpage/add-to-favorites.html"}}a.module("rpPageOptions").directive("addToFavorites",[b])}(angular),function(a){"use strict";function b(a){a.put(d,c)}var c,d;d="templates/realpage/page-options.html",c="<div class='page-options' ng-class='ctrl.getState()'><div class='rp-actions-menu' model='model.menuOptions'></div><span class='icon-fav'></span></div>",a.module("rpPageOptions").run(["$templateCache",b])}(angular),function(a){"use strict";function b(){var a={};return a.setActions=function(b){a.menuOptions={className:"rp-actions-menu-1",actions:[{hide:!1,text:"Add to Favorites",className:"add-fav-link",iconClassName:"add-fav",method:b.openForm},{hide:!1,text:"Remove from Favorites",className:"del-fav-link",iconClassName:"del-fav",method:b.delFav},{hide:!1,iconClassName:"set-as-home",className:"set-as-home-link",text:"Make this my Home page",method:b.setAsHome}]}},a.setAsHome=function(b){a.menuOptions.actions.forEach(function(a){"set-as-home"==a.iconClassName&&(a.hide=b)})},a}a.module("rpPageOptions").factory("pageOptionsModel",[b])}(angular),function(a){"use strict";function b(a,b,c,d,e,f,g,h){var i=this,j=e.pageInfo();i.init=function(){a.model=c},i.setAsHome=function(a){var b={activityUIID:a.activityUIID};d.setHomepage(b),h.set(a.url)},i.atHome=function(){return b.fullUrl()==h.get()},i.getState=function(){return{"allow-fav":f.allowSetFav(),"is-fav":g.isFav(j.guid),"allow-home":f.allowSetHome()&&!i.atHome()}},i.init()}a.module("rpPageOptions").controller("PageOptionsCtrl",["$scope","location","pageOptionsModel","pageOptions","authorization","userAccess","favoritesModel","rpHomepage",b])}(angular),function(a){"use strict";function b(a,b,c,d){function e(e,f,g,h){var i={},j=d.pageInfo();i.init=function(){e.dir=i,e.model=a,a.pageInfo=j,a.setActions(i)},i.openForm=function(){c.open()},i.delFav=function(){b.delFav(a.pageInfo.guid).save().then(b.reLoad)},i.setAsHome=function(){h.setAsHome(a.pageInfo)},i.init()}return{scope:{},link:e,restrict:"E",replace:!0,controller:"PageOptionsCtrl as ctrl",templateUrl:"templates/realpage/page-options.html"}}a.module("rpPageOptions").directive("pageOptions",["pageOptionsModel","favoritesModel","addToFavoritesModel","authorization",b])}(angular),function(a){"use strict";function b(a){function b(){return e=f,c={},d={setHomepage:{method:"POST",params:{activityUIID:"@activityUIID"}}},a(e,c,d).setHomepage}var c,d,e,f="/api/core/common/homepage/:activityUIID";return{setHomepage:b()}}a.module("rpPageOptions").factory("pageOptions",["$resource",b])}(angular);