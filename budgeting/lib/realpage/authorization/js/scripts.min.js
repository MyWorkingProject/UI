angular.module("rpAuthorization",[]),function(a){"use strict";function b(a,b){function c(a,b,c){return{response:function(b){return b||a.when(b)},responseError:function(d){return 401===d.status&&(c.erase("authorization"),b.location.href="/ui/signin/#/"),a.reject(d)}}}a.factory("httpInterceptor",["$q","$window","rpCookie",c]),b.interceptors.push("httpInterceptor")}a.module("rpAuthorization").config(["$provide","$httpProvider",b])}(angular),function(a){"use strict";function b(a,b){var c=b.read("authorization");void 0!==c&&(c="Bearer "+c,a.defaults.headers.common.Authorization=c)}a.module("rpAuthorization").run(["$http","rpCookie",b])}(angular),function(a){"use strict";function b(){window.location.href.match(/\/ui\//)&&(d=!RealPage.cookie.read("authorization"),e=window.location.href.replace(/^[^\/]*\/{2}[^\/]+(\/.*)/g,"$1"),f=window.location.href.replace(/.*\/ui\/([^\/]+)\/.*/g,"$1"),h="/ui/signin/#/"==e||"/ui/signin/"==e,g="ui-library"!==f&&!h,d&&g&&!h&&(window.location.href="/ui/signin/#/"))}function c(a){g&&a.check()}var d,e,f,g,h;b(),a.module("rpAuthorization").run(["authorization",c])}(angular),function(a){"use strict";function b(a,b,c,d,e){var f,g={},h={},i="/api/core/common/access/productarea?ProductAreaRouteURI=";return f={accessModelList:[]},h.ready=d(),g.events=h,g.isEmpty=function(){return 0===f.accessModelList.length},g.req=function(){var a,d=c.appUrl();return a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},url:i+b.encodeURIComponent(d)}},g.success=function(a){var b=!1,c=a&&a.data&&a.data.productAreaAccessModel&&void 0!==a.data.productAreaAccessModel.userHasAccess;b=e.read("skipBlockingUrl"),c&&(a.data.blockingURL&&!b||a.data.productAreaAccessModel.userHasAccess&&(f=a.data.productAreaAccessModel,h.ready.publish()))},g.error=function(){},g.check=function(){var b=g.req();return a(b).then(g.success,g.error)},g.login=function(){b.location.href="/ui/signin/#/"},g.pageInfo=function(){var a=!1,b=c.fullUrl();return f.accessModelList.forEach(function(c){c.url==b&&(a=c)}),a},g.getActivityGUID=function(a){var b=!1;return f.accessModelList.forEach(function(c){var d=c.url.replace(/\//g,"\\/");d=new RegExp("^"+d+c.urlPartRegEx+"$"),a.match(d)&&(b=c.guid)}),b},g}a.module("rpAuthorization").factory("authorization",["$http","$window","location","eventStream","rpCookie",b])}(angular),function(a){"use strict";function b(b,c,d,e,f,g){var h,i,j={},k="/api/core/common/access/activity?ActivityGUID=";return i={isFavoritable:!1,allowedToMakeHomePage:!1},j.req=function(){var a,b=e.fullUrl();return a={method:"GET",url:k+f.getActivityGUID(b)}},j.check=function(){if(f.isEmpty())return h=b.defer(),f.events.ready.subscribe(j.check),h;var a=j.req();return c(a).then(j.success,j.error)},j.success=function(b){a.extend(i,b.data.activityAccessModel||{}),i.userHasAccess?j.resolve():j.accessDenied()},j.error=function(){j.resolve()},j.accessDenied=function(){},j.resolve=function(){h&&(h.resolve(),h=void 0)},j.allowSetHome=function(){return i.allowedToMakeHomePage},j.allowSetFav=function(){return i.isFavoritable},j}a.module("rpAuthorization").factory("userAccess",["$q","$http","$window","location","authorization","rpCookie",b])}(angular);