angular.module("rpSticky",[]),function(a){"use strict";function b(b,c){function d(d,f,g){var h={};h.data={},h.isLocked=!1,h.init=function(){var a=h.getOptions(),f=a.instName?a.instName:"rpSticky"+e++;d[f]=f,h.setup().recordElemData(),d.$on("$destroy",h.destroy),h.sizeWatch=c.subscribe(h.onWinResize),h.scrollWatch=b.subscribe(h.onWinScroll)},h.setup=function(){var b=h.getOptions().phdrClassName,c='<div class="'+b+'" />';return h.phdr=a.element(c).insertAfter(f),h},h.onWinScroll=function(a){if(!h.isDisabled()){var b=h.getOptions().lockTop,c=a.scrollTop>h.data.offsetTop-b;h[c?"lock":"unlock"]()}},h.recordElemData=function(){return h.data.elemWd=f.outerWidth(),h.data.elemHt=f.outerHeight(),h.data.offsetTop=f.offset().top,h.data.offsetLeft=f.offset().left,h},h.recordPhdrData=function(){return h.data.elemWd=h.phdr.width(),h.data.offsetLeft=h.phdr.offset().left,h},h.onWinResize=function(){if(h.isLocked){h.recordPhdrData();var a={width:h.data.elemWd,left:h.data.offsetLeft};f.css(a)}else h.recordElemData()},h.lock=function(){var a,b;h.isLocked=!0,a={marginLeft:0,width:h.data.elemWd,left:h.data.offsetLeft,top:h.getOptions().lockTop},b={display:"block",height:h.data.elemHt},h.phdr.css(b),f.css(a).addClass("locked")},h.unlock=function(){var a,b;h.isLocked=!1,a={top:"",left:"",width:"",marginLeft:""},b={height:"",display:""},h.phdr.css(b),f.css(a).removeClass("locked"),h.recordElemData()},h.getOptions=function(){var b,c;return b={lockTop:0,isDisabled:!1,phdrClassName:"rp-sticky-placeholder"},c=d.$eval(g.rpSticky)||{},a.extend(b,c)},h.isDisabled=function(){return h.getOptions().isDisabled},h.destroy=function(){h.sizeWatch(),h.scrollWatch(),h.phdr.remove()},h.init()}var e=1;return{link:d,restrict:"A"}}a.module("rpSticky").directive("rpSticky",["windowScroll","windowSize",b])}(angular);