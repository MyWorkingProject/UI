angular.module("rpFormInputDate",[]),function(a){"use strict";function b(a){a.put(d,c)}var c,d;d="templates/realpage/form/input-date/input-date.html",c="<div class='rp-input-date {{dateModel.options.displaySize}}' ng-class='dateModel.state()'><span ng-show='!dateModel.display' class='input-placeholder'>{{dateModel.options.displayFormat}}</span><input type='text' ng-blur='dateModel.blur()' class='input-type-date' ng-model='dateModel.display' ng-focus='dateModel.focus()' ng-change='dir.updateModel()' ng-model-options='{\"updateOn\": \"blur\"}' maxlength='{{dateModel.options.maxLength}}' ><span class='rp-icon-calendar' rp-stop-event='click' ng-click='dir.showDatepicker($event)'></span></div>",a.module("rpFormInputDate").run(["$templateCache",b])}(angular),function(a,b){"use strict";function c(c,d,e){var f=1;return function(){var g={},h=e();return g.id="inputDateModel"+f++,g.display=b,g.options={maxLength:10,anchorRight:!1,displayFormat:"MM/DD/YY"},g._state={focus:!1},g.state=function(){return a.extend(g._state,{empty:!g.display})},g.updateOptions=function(b){a.extend(g.options,b||{})},g.focus=function(){g._state.focus=!0,g._state.touched=!0},g.blur=function(){g._state.focus=!1},g.dirty=function(){g._state.dirty=!0},g.invalid=function(){g._state.invalid=!0},g.valid=function(){g._state.invalid=!1},g.getValue=function(){var a=h.parse(g.display),b=g.display&&a,e=c(a,g.options.displayFormat);if(b=b&&"Invalid date"!=e,e&&g.options.min){var f=c(g.options.min,"x");b=b&&!d(e).isBefore(f)}if(e&&g.options.max){var i=c(g.options.max,"x");b=b&&!d(e).isAfter(i)}return b?e.format("x"):"Invalid date"},g.updateDisplay=function(a){g._state.invalid=!1,g.display=c(a,"x").format(g.options.displayFormat)},g}}a.module("rpFormInputDate").factory("rpInputDateModel",["moment","rpDate","dateParser",c])}(angular),function(a,b){"use strict";function c(a,c,d){function e(e,g,h){var i,j,k=c();i={datepickerLink:b,datepickerOptions:{},id:"rpInputDate"+f++},i.init=function(){e.dir=i,e.dateModel=k,k.updateOptions(e.options),i.watchModel()},i.watchModel=function(){return j=e.$watch("model",i.updateDisplay),i},i.updateModel=function(){k.dirty();var a=k.getValue();"Invalid date"==a?k.invalid():(k.valid(),e.model=a)},i.updateDisplay=function(a){a&&"Invalid date"!=a&&k.updateDisplay(a)},i.datepickerData=function(){var b="",c="",d=e.model?a(e.model,"x"):"",f=e.model?a(e.model,"x"):a();return e.options&&(b=e.options.min?a(e.options.min,"x"):"",c=e.options.max?a(e.options.max,"x"):""),{min:b,max:c,callerID:i.id,refDate:f,selDate:d}},i.showDatepicker=function(){var a=g.offset(),b=i.datepickerData();if(d.isHidden())d.show();else if(i.id==d.prevCaller())return void d.hide();e.options&&e.options.anchorRight&&(a.left=a.left+g.outerWidth()-d.size.width),a.top+=g.height()+5,d.update(b).updateStyles(a),i.datepickerLink=d.events.subscribe(i.unlinkDatepicker)},i.unlinkDatepicker=function(a){["update","hide"].contains(a.name)?i.datepickerLink():"select"==a.name&&(e.model=a.data)},i.init()}var f=1;return{scope:{model:"=",options:"="},link:e,restrict:"E",replace:!0,templateUrl:"templates/realpage/form/input-date/input-date.html"}}a.module("rpFormInputDate").directive("rpInputDate",["moment","rpInputDateModel","rpDatepickerModel",c])}(angular),function(a){"use strict";function b(a){function b(b,c,d){function e(b){var c=a.test(b);return c.nav||(c.numeric||c.slash)&&!c.shift}c.on("keydown.inputTypeDate",e)}return{link:b,restrict:"C"}}a.module("rpFormInputDate").directive("inputTypeDate",["keycode",b])}(angular);