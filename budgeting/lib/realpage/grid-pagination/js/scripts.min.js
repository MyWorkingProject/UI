angular.module("rpGrid").run(["$templateCache",function(a){a.put("realpage/grid-pagination/templates/grid-pagination.html",'<div class="rp-grid-pagination" ng-class="{active: model.isActive}"><div class="rp-grid-pagination-inner"><p class="rp-grid-pagination-displaying">Displaying {{model.rangeStart}}-{{model.rangeEnd}} of {{model.dataCount}}</p><p class="rp-grid-pagination-controls prev"><span ng-class="{active: model.allowFirst}" ng-click="gridPagination.goToFirstPage()" class="rp-grid-pagination-control rp-grid-pagination-control-first"></span> <span ng-class="{active: model.allowPrev}" ng-click="gridPagination.goToPrevPage()" class="rp-grid-pagination-control rp-grid-pagination-control-prev"></span></p><ul class="rp-grid-pagination-pages"><li class="rp-grid-pagination-page" ng-repeat="page in model.pages" ng-class="{active: page.active}" ng-click="gridPagination.goToPage(page)">{{page.number + 1}}</li></ul><p class="rp-grid-pagination-controls"><span ng-class="{active: model.allowNext}" ng-click="gridPagination.goToNextPage()" class="rp-grid-pagination-control rp-grid-pagination-control-next"></span> <span ng-class="{active: model.allowLast}" ng-click="gridPagination.goToLastPage()" class="rp-grid-pagination-control rp-grid-pagination-control-last end"></span></p></div></div>')}]),function(a){"use strict";function b(){function a(a,b,c){var d={},e=a.model;d.init=function(){a.gridPagination=d},d.goToPage=function(a){a.active||e.goToPage(a)},d.goToFirstPage=function(){e.goToFirstPage()},d.goToPrevPage=function(){e.goToPrevPage()},d.goToNextPage=function(){e.goToNextPage()},d.goToLastPage=function(){e.goToLastPage()},d.init()}return{scope:{model:"="},link:a,restrict:"E",replace:!0,templateUrl:"realpage/grid-pagination/templates/grid-pagination.html"}}a.module("rpGrid").directive("rpGridPagination",[b])}(angular),function(a){"use strict";function b(b){return function(){var c,d;return d={currentPage:0,pagesPerGroup:5,recordsPerPage:2,currentPageGroup:0},c={data:[],pages:[],config:d,pageGroups:[],isActive:!1,allowPrev:!1,allowNext:!1,allowLast:!1,allowFirst:!1},c.setConfig=function(b){return a.extend(d,b),c},c.setData=function(a){var b=a.length;return void 0===c._data&&(c._data=[].concat(a)),c.dataCount=b,c.data=[].concat(a),c.setPageGroups(b),c.isActive=0!==b,c.totalPages=Math.ceil(b/d.recordsPerPage),c},c.getMaxPages=function(){return Math.ceil(c.dataCount/d.recordsPerPage)},c.setPageGroups=function(a){var b=0,e=c.getMaxPages(),f=Math.ceil(a/(d.pagesPerGroup*d.recordsPerPage));for(c.pages=[],c.pageGroups=[];b<f;){var g=b*d.pagesPerGroup,h=(b+1)*d.pagesPerGroup;h>e&&(h=e);for(var i=[],j=0,k=g;k<h;k++)i.push({active:!1,number:b*d.pagesPerGroup+j++});c.pageGroups.push(i),b++}return c.setPageGroup(),c},c.setGrid=function(a){return c.grid=a,a.subscribe("sortBy",c.sort),a.subscribe("filterBy",c.filter),c},c.sortData=function(a){var d=Object.keys(a)[0],e="ASC"!==a[d];return b("naturalSort")(c.data,d,e)},c.sort=function(a){var b=c.sortData(a);c.sortBy=a,c.setData(b).setGridData()},c.filterData=function(a){return b("filter")(c._data,a)},c.filter=function(a){var b=c.filterData(a);c.allowFirst=!0,c.setData(b),c.sortBy&&c.sort(c.sortBy),c.goToFirstPage()},c.setPageGroup=function(){return c.pages=c.pageGroups[d.currentPageGroup]||[],c},c.setDataRange=function(){return c.rangeStart=d.currentPage*d.recordsPerPage+1,c.rangeEnd=c.rangeStart+d.recordsPerPage-1,c.rangeEnd>c.dataCount&&(c.rangeEnd=c.dataCount),c},c.setControls=function(){return c.allowFirst=!(0===d.currentPageGroup&&0===d.currentPage),c.allowPrev=0!==d.currentPageGroup,c.allowNext=d.currentPageGroup!=c.pageGroups.length-1,c.allowLast=!(d.currentPageGroup===c.pageGroups.length-1&&d.currentPage===c.pages.last().number),c},c.setActivePage=function(){return c.pages.forEach(function(a){a.active=a.number===d.currentPage}),c},c.getDataSlice=function(){var a=d.currentPage*d.recordsPerPage,b=a+d.recordsPerPage;return b>c.dataCount&&(b=c.dataCount),c.data.slice(a,b)},c.setGridData=function(){var a=c.getDataSlice();return c.grid.flushData().setData({records:a}),c},c.goToPage=function(a){d.currentPage=a.number,c.setPageGroup().setDataRange().setControls().setActivePage().setGridData()},c.goToFirstPage=function(){c.allowFirst&&(d.currentPage=0,d.currentPageGroup=0,c.setPageGroup().setDataRange().setControls().setActivePage().setGridData())},c.goToPrevPage=function(){c.allowPrev&&(d.currentPageGroup--,d.currentPage-=d.pagesPerGroup,c.setPageGroup().setDataRange().setControls().setActivePage().setGridData())},c.goToNextPage=function(){if(c.allowNext){var a=c.getMaxPages();d.currentPageGroup++,d.currentPage+=d.pagesPerGroup,d.currentPage>a&&(d.currentPage=a),c.setPageGroup().setDataRange().setControls().setActivePage().setGridData()}},c.goToLastPage=function(){c.allowLast&&(d.currentPageGroup=c.pageGroups.length-1,c.setPageGroup(),d.currentPage=c.pages.last().number,c.setDataRange().setControls().setActivePage().setGridData())},c.destroy=function(){c=void 0,d=void 0},c}}a.module("rpGrid").factory("rpGridPaginationModel",["$filter",b])}(angular);